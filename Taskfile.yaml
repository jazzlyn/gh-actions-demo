---
version: "3"

vars:
  PROJECT_DIR:
    sh: "git rev-parse --show-toplevel"

includes:
  flux: .taskfiles/flux.yaml
  pre-commit: .taskfiles/pre-commit.yaml

tasks:
  lint:
    desc: lint codebase
    dir: "{{.PROJECT_DIR}}"
    cmds:
      - task: pre-commit:init
      - task: pre-commit:run

  test:
    desc: test codebase
    dir: "{{.PROJECT_DIR}}"
    cmds:
      - task: flux:test
